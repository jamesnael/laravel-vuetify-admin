(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"4Nsp":function(a,e,t){"use strict";var r=t("cEyi");t.n(r).a},cEyi:function(a,e,t){var r=t("yWpY");"string"==typeof r&&(r=[[a.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(r,i);r.locals&&(a.exports=r.locals)},"p/j0":function(a,e,t){"use strict";t.r(e);var r=t("e7F3"),i=t("TJPC"),s=t("enAU");Object(r.c)("required",i.g),Object(r.c)("email",i.b),Object(r.c)("numeric",i.e),Object(r.c)("min",i.d),Object(r.c)("max",i.c),Object(r.c)("regex",i.f),Object(r.c)("confirmed",i.a),Object(r.d)("id",s);var n={components:{ValidationObserver:r.a,ValidationProvider:r.b},props:{actionForm:{type:String,required:!0},redirectUri:{type:String,required:!0},dataUri:{type:String,default:""},filterPerusahaan:{type:Array,required:!0},filterProvince:{type:Array,required:!0},filterManajerProyek:{type:Array,required:!0},filterKoordinatorLapangan:{type:Array,required:!0},filterPengawas:{type:Array,required:!0},filterPersetujuan:{type:Array,required:!0},filterKontraktorUtama:{type:Array,required:!0}},data:function(){return{tanggal_mulai:!1,tanggal_selesai:!1,jam_kerja_mulai:!1,jam_kerja_selesai:!1,mulai_absen_masuk:!1,batas_absen_keluar:!1,show_maps:!0,form_data:{persetujuan:[],nama_proyek:"",id_perusahaan:"",provinsi:"",kota:"",uang_lembur:"",id_project_manager:"",id_koordinator_lapangan:"",id_pengawas_proyek:"",id_kontraktor_utama:"",lembur:"Aktif",insentif:"Aktif",bbm:"Aktif",tanggal_mulai:"",tanggal_selesai:"",jam_kerja_mulai:"08:00",jam_kerja_selesai:"17:00",mulai_absen_masuk:"07:30",batas_absen_keluar:"17:30"},field_state:!1,form_alert_state:!1,form_alert_color:"",form_alert_text:""}},mounted:function(){this.getFormData(),this.addPersetujuan()},methods:{getFormData:function(){var a=this;this.dataUri&&(this.show_maps=!1,this.field_state=!0,axios.get(this.dataUri).then((function(e){if(e.data.success){var t=e.data.data;a.form_data={nama_proyek:t.nama_proyek,id_perusahaan:t.id_perusahaan,provinsi:t.provinsi,kota:t.kota,uang_lembur:t.uang_lembur,id_project_manager:t.id_project_manager,id_koordinator_lapangan:t.id_koordinator_lapangan,id_pengawas_proyek:t.id_pengawas_proyek,id_kontraktor_utama:t.id_kontraktor_utama,lembur:1==t.is_lembur?"Aktif":"",insentif:1==t.is_insentif?"Aktif":"",bbm:1==t.is_bbm?"Aktif":"",tanggal_mulai:t.tanggal_mulai,tanggal_selesai:t.tanggal_selesai,jam_kerja_mulai:t.jam_kerja_mulai,jam_kerja_selesai:t.jam_kerja_selesai,mulai_absen_masuk:t.mulai_absen_masuk,batas_absen_keluar:t.batas_absen_keluar,persetujuan:[]},_.forEach(t.persetujuan,(function(e){a.form_data.persetujuan.push({nama_penyetuju:e.user_karyawan_id,id:e.id})})),a.field_state=!1}else a.form_alert_state=!0,a.form_alert_color="error",a.form_alert_text=e.data.message,a.field_state=!1;a.show_maps=!0})).catch((function(e){a.form_alert_state=!0,a.form_alert_color="error",a.form_alert_text=response.data.message,a.field_state=!1,a.show_maps=!0})))},clearForm:function(){this.form_data={persetujuan:[],nama_proyek:"",id_perusahaan:"",provinsi:"",kota:"",uang_lembur:"",id_project_manager:"",id_koordinator_lapangan:"",id_pengawas_proyek:"",id_kontraktor_utama:"",lembur:"Aktif",insentif:"Aktif",bbm:"Aktif",tanggal_mulai:"",tanggal_selesai:"",jam_kerja_mulai:"08:00",jam_kerja_selesai:"17:00",mulai_absen_masuk:"07:30",batas_absen_keluar:"17:30"},this.$refs.observer.reset()},addPersetujuan:function(){this.form_data.persetujuan.push({nama_penyetuju:""})},removePersetujuan:function(a){0!=a&&(this.form_data.persetujuan=_.filter(this.form_data.persetujuan,(function(e,t){return t!=a})))},submitForm:function(){var a=this;this.$refs.observer.validate().then((function(e){e&&(a.field_state=!0,a.postFormData())}))},postFormData:function(){var a=this,e=new FormData(this.$refs["post-form"]);this.dataUri&&e.append("_method","put"),e.append("persetujuan",this.form_data.persetujuan?JSON.stringify(this.form_data.persetujuan):[]),e.append("tanggal_mulai",this.form_data.tanggal_mulai),e.append("tanggal_selesai",this.form_data.tanggal_selesai),e.append("jam_kerja_mulai",this.form_data.jam_kerja_mulai),e.append("jam_kerja_selesai",this.form_data.jam_kerja_selesai),e.append("mulai_absen_masuk",this.form_data.mulai_absen_masuk),e.append("batas_absen_keluar",this.form_data.batas_absen_keluar),axios.post(this.actionForm,e).then((function(e){e.data.success?(a.form_alert_state=!0,a.form_alert_color="success",a.form_alert_text=e.data.message,setTimeout((function(){a.goto(a.redirectUri)}),6e3)):(a.field_state=!1,a.form_alert_state=!0,a.form_alert_color="error",a.form_alert_text=e.data.message)})).catch((function(e){a.field_state=!1,a.form_alert_state=!0,a.form_alert_color="error",a.form_alert_text="Oops, something went wrong. Please try again later."}))}}},o=(t("4Nsp"),t("KHd+")),u=Object(o.a)(n,void 0,void 0,!1,null,null,null);e.default=u.exports},yWpY:function(a,e,t){(a.exports=t("I1BE")(!1)).push([a.i,"#view-map{min-height:400px;height:100%}",""])}}]);