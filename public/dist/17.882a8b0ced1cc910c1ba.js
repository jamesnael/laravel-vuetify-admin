(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{PdCo:function(t,a,e){"use strict";e.r(a);var r=e("wd/R"),o={props:{has_access:Boolean},data:function(){return{fieldState:!1,loading:!1,dialog:!1,form_alert_state:!1,form_alert_color:"error",form_alert_text:"",display_picker:!1,filterDates:r().format("YYYY-MM")}},computed:{dateRangeText:function(){return r("21-"+r(this.filterDates,"YYYY-MM").subtract(1,"months").format("MM-YYYY"),"DD-MM-YYYY").format("DD MMMM YYYY")+" - "+r("20-"+r(this.filterDates,"YYYY-MM").format("MM-YYYY"),"DD-MM-YYYY").format("DD MMMM YYYY")}},methods:{extractData:function(){var t=this;this.fieldState=!0;var a=new FormData;a.append("start_date",r("21-"+r(this.filterDates,"YYYY-MM").subtract(1,"months").format("MM-YYYY"),"DD-MM-YYYY").format("YYYY-MM-DD")),a.append("end_date",r("20-"+r(this.filterDates,"YYYY-MM").format("MM-YYYY"),"DD-MM-YYYY").format("YYYY-MM-DD")),axios.post(this.ziggy("jamkerja.insentif.index.extract").url(),a).then((function(a){a.data.success?(window.open(a.data.data,"_blank"),t.dialog=!1):(t.form_alert_state=!0,t.form_alert_color="error",t.form_alert_text=a.data.message),t.dialog=!1,t.fieldState=!1})).catch((function(a){t.fieldState=!1,t.form_alert_state=!0,t.form_alert_color="error",t.form_alert_text=a.response.data.message}))}}},n=e("KHd+"),i=Object(n.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-row",{staticClass:"px-md-4 px-sm-2"},[e("v-col",{attrs:{cols:"12"}},[e("jamkerja-proyek-table",{attrs:{route:"jamkerja.insentif.detail.index"},scopedSlots:t._u([{key:"after.reload",fn:function(){return[t.has_access?e("v-dialog",{attrs:{width:"600"},scopedSlots:t._u([{key:"activator",fn:function(a){var r=a.on,o=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mt-1 ml-4 px-6 py-5 white--text",attrs:{elevation:"5",color:"success"}},"v-btn",o,!1),r),[t._v("\n            \t\t      DOWNLOAD .xlsx\n            \t\t    ")])]}}],null,!1,736443235),model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[t._v(" "),e("v-card",[e("v-card-title",[e("small",[t._v("Download Komisi & Insentif Semua Proyek")])]),t._v(" "),e("v-card-text",[e("v-menu",{ref:"display_picker",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(a){var r=a.on,o=a.attrs;return[e("v-text-field",t._g(t._b({attrs:{"prepend-icon":"mdi-calendar",readonly:"",disabled:t.fieldState||t.loading},model:{value:t.dateRangeText,callback:function(a){t.dateRangeText=a},expression:"dateRangeText"}},"v-text-field",o,!1),r))]}}],null,!1,883396517),model:{value:t.display_picker,callback:function(a){t.display_picker=a},expression:"display_picker"}},[t._v(" "),e("v-date-picker",{attrs:{type:"month","no-title":""},on:{input:function(a){t.display_picker=!1}},model:{value:t.filterDates,callback:function(a){t.filterDates=a},expression:"filterDates"}})],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"mt-1 ml-4 px-6 py-5",attrs:{color:"red darken-4",text:"",disabled:t.fieldState||t.loading},on:{click:function(a){t.dialog=!1}}},[t._v("\n            \t\t        Batal\n            \t\t      ")]),t._v(" "),e("v-btn",{staticClass:"mt-1 ml-4 px-6 py-5 white--text",attrs:{color:"success",loading:t.fieldState||t.loading,disabled:t.fieldState||t.loading},on:{click:function(a){return t.extractData()}}},[t._v("\n            \t\t        Submit\n            \t\t      ")])],1)],1)],1):t._e()]},proxy:!0}])})],1)],1)}),[],!1,null,null,null);a.default=i.exports}}]);