(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0jHJ":function(t,a,e){"use strict";e.r(a);var n,o={name:"ProyekTable",props:{route:String,actionRoute:String},data:function(){return{uri:this.ziggy("jamkerja.proyek.table").url(),search:"",page:1,lastPage:1,items:[],loading:!1,headers:[{text:"No",align:"center",value:"rowIndex"},{text:"Nama Proyek",value:"nama_proyek"},{text:"Nama Perusahaan",value:"nama_perusahaan"},{text:"Lokasi",value:"lokasi"},{text:"Pengawas",value:"nama_pengawas"},{text:"Masa Proyek",value:"masa_proyek"},{text:"Operator",value:"operator_proyek_count"},{text:"Aksi",value:"action_field",align:"center"}]}},computed:{query:function(){var t=["search="+this.search,"page="+this.page,"paginate=10"];return _.join(t,"&")}},mounted:function(){this.getData()},methods:{detailUri:function(t){return this.ziggy(this.route,[t.slug]).url()},actionDetailUri:function(t){return this.ziggy(this.actionRoute,[t.slug]).url()},getData:function(){var t=this;this.loading=!0,n&&n.cancel(),n=axios.CancelToken.source(),axios.get(this.uri+"?"+this.query,{cancelToken:n.token}).then((function(a){a.data.success&&t.setData(a.data.data),t.loading=!1})).catch((function(a){t.loading=!1}))},setData:function(t){var a=[],e=t.from;_.forEach(t.data,(function(t,n){t.rowIndex=e++,a.push(t)})),this.items=a,this.lastPage=t.last_page}}},i=e("KHd+"),r=Object(i.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",{attrs:{flat:""}},[e("v-row",{staticClass:"ml-0"},[e("v-col",{attrs:{md:"4",sm:"6"}},[e("v-text-field",{attrs:{label:"Cari nama proyek/perusahaan","prepend-inner-icon":"mdi-magnify"},on:{keyup:function(a){return t.getData()}},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),t._v(" "),e("v-col",{staticClass:"text-right",attrs:{md:"8",sm:"6"}},[e("v-btn",{staticClass:"mt-2",attrs:{elevation:"5",color:"primary",loading:t.loading},on:{click:function(a){return t.getData()}}},[e("v-icon",[t._v("mdi-sync")])],1)],1)],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.items,"hide-default-footer":"","fixed-header":"","disable-sort":"","no-data-text":"Tidak data untuk ditampilkan.","no-results-text":"Tidak data yang cocok dengan pencarian Anda.",loading:t.loading,"loading-text":"Mohon menunggu ..."},scopedSlots:t._u([{key:"item.operator_proyek_count",fn:function(a){var e=a.item;return[t._v("\n      "+t._s(e.operator_proyek_count)+" orang\n    ")]}},{key:"item.action_field",fn:function(a){var n=a.item;return[e("v-tooltip",{attrs:{top:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",href:t.detailUri(n)}},"v-btn",i,!1),o),[e("v-icon",{attrs:{small:""}},[t._v("mdi-eye")])],1)]}}],null,!0)},[t._v("\n        Lihat Detail\n      ")]),t._v(" "),e("v-tooltip",{attrs:{top:"",color:"black"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,i=a.attrs;return[t.actionRoute?e("v-btn",t._g(t._b({staticClass:"pa-2",attrs:{icon:"",href:t.actionDetailUri(n)}},"v-btn",i,!1),o),[e("v-icon",{attrs:{small:""}},[t._v("mdi-file-excel-outline")])],1):t._e()]}}],null,!0)},[t._v("\n        Extract Data\n      ")])]}}])}),t._v(" "),e("v-pagination",{staticClass:"style-pagination py-4",attrs:{length:t.lastPage,"total-visible":10,color:"red darken-4"},on:{input:function(a){return t.getData()}},model:{value:t.page,callback:function(a){t.page=a},expression:"page"}})],1)}),[],!1,null,null,null);a.default=r.exports}}]);